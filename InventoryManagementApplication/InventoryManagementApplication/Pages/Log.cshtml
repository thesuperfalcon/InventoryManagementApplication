@page
@model InventoryManagementApplication.Pages.LogModel
@{
    ViewData["Title"] = "Loggning";
}

<div class="container mt-4">
    <h1>Loggning, antal: @Model.Logs.Count</h1>

    <div class="mb-3">
        <div class="input-group">
            <input id="searchInput" type="text" class="form-control" placeholder="Sök..." aria-label="Sök" style="max-width: 300px; width: 100%;" />
            <span class="input-group-text">
                <i class="bi bi-search"></i>
            </span>
        </div>
    </div>

    <div>
        <table id="logsTable" class="table table-striped table-hover" data-sort-direction="asc">
            <thead>
                <tr>
                    <th scope="col"><a href="javascript:void(0);" onclick="sortTable(0)">Namn</a></th>
                    <th scope="col"><a href="javascript:void(0);" onclick="sortTable(1)">Anst.nr</a></th>
                    <th scope="col"><a href="javascript:void(0);" onclick="sortTable(2)">Typ av Objekt</a></th>
                    <th scope="col"><a href="javascript:void(0);" onclick="sortTable(3)">Anteckning</a></th>
                    <th scope="col"><a href="javascript:void(0);" onclick="sortTable(4)">Objekt-Id</a></th>
                    <th scope="col"><a href="javascript:void(0);" onclick="sortTable(5)">Tidpunkt</a></th>
                    <th scope="col"><a href="javascript:void(0);" onclick="sortTable(6)">Händelse</a></th>
                </tr>
            </thead>
            <tbody id="myLogTable">
                @if (Model.Logs.Any())
                {
                    for (int i = 0; i < Model.Logs.Count; i++)
                    {
                        var log = Model.Logs[i];
                        <tr>
                            <td>@(Model.UserFullName[i] != null && !string.IsNullOrWhiteSpace(Model.UserFullName[i]) ? Model.UserFullName[i] : "Data finns ej")</td>
                            <td>@(Model.UserEmployeeNumbers[i] != null && !string.IsNullOrWhiteSpace(Model.UserEmployeeNumbers[i]) ? Model.UserEmployeeNumbers[i] : "Data finns ej")</td>
                            <td>@(log.EntityType != null ? log.EntityType : "Data finns ej")</td>
                            <td>@(log.EntityDetails != null && !string.IsNullOrWhiteSpace(log.EntityDetails) ? log.EntityDetails : "Data finns ej")</td>
                            <td>@(log.Id != null ? log.Id.ToString() : "Data finns ej")</td>
                            <td>@(log.TimeStamp != null ? log.TimeStamp.ToString() : "Data finns ej")</td>
                            <td>@(log.Action != null ? log.Action : "Data finns ej")</td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="6" class="text-center">Ingen data..</td>
                    </tr>
                }
            </tbody>
        </table>
        <div class="mb-3">
            <button id="prevPage" class="btn btn-primary">Bak</button>
            <span id="pageNumber" class="mx-3"></span>
            <button id="nextPage" class="btn btn-primary">Fram</button>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/logIndex.js"></script>
}
